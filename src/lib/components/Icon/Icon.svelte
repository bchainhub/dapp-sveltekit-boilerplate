<script lang="ts">
	import { Home } from 'lucide-svelte';

	export let name: string;
	export let className: string = '';
	export let color: string | undefined = undefined;
	export let status: string = 'off';
	export let animation: string = 'none';

	const icons: Record<string, string | any> = {
		corepass: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70"><path d="M57.317 56.544a2.77 2.77 0 0 0-3.856-.331 29.723 29.723 0 0 1-2.842 2.101l-.113.073c-.23.15-.463.295-.699.434l-.126.077-.074.045-.132.079c-.547.321-1.104.623-1.671.907l-.131.065-.181.092-.238.114-.017.01-.238.112-.181.084-.117.054-.186.083c-.082.035-.167.074-.251.109-.168.074-.339.145-.51.213-.253.104-.507.204-.763.3h-.005c-.166.064-.334.124-.503.183l-.033.012-.24.085c-.084.028-.168.055-.25.085l-.253.082-.071.023-.163.051-.135.043c-.137.043-.274.084-.412.124l-.091.028-.169.049-.194.053-.155.043-.103.028-.13.033c-.147.039-.294.076-.441.111l-.11.029-.158.038-.13.03-.034.008-.201.045c-.122.029-.245.054-.37.079-.117.025-.235.048-.349.071l-.286.054-.177.03c-.058.01-.104.02-.158.028l-.227.038-.222.036-.028.005c-.092.013-.181.028-.271.04-.088.013-.175.026-.259.036l-.057.007-.214.029h-.016l-.178.023-.159.017c-.155.018-.313.035-.472.051h-.038a1.601 1.601 0 0 1-.155.02l-.136.013c-.054.005-.107.01-.161.013l-.161.013c-.211.015-.426.03-.638.042l-.282.016-.161.005c-.041 0-.082.002-.123.005l-.156.005h-.158c-.053.002-.107.008-.161.008h-.056c-.089 0-.178.003-.265.003h-.579a29.464 29.464 0 0 1-8.881-1.483c-.102-.036-.207-.069-.309-.105a3.862 3.862 0 0 1-.151-.054l-.15-.053c-.082-.028-.163-.058-.245-.088l-.102-.039-.274-.101-.045-.018c-.036-.012-.072-.028-.104-.041l-.036-.015-.028-.01-.062-.023-.056-.023h-.013l-.025-.013-.115-.045c-.048-.02-.1-.04-.148-.061a10.525 10.525 0 0 1-.245-.102h-.013l-.164-.07-.191-.084a29.327 29.327 0 0 1-12.665-10.634 29.117 29.117 0 0 1-4.826-15.982v-.432c0-.109.005-.219.008-.328v-.025c.089-3.244.723-6.45 1.876-9.485l.122-.318c.036-.094.074-.187.112-.281l.08-.191c.091-.22.186-.438.283-.655l.01-.023c.003-.007.007-.02.013-.03l.107-.236s0-.006.003-.008c.032-.073.065-.145.099-.216.01-.02.018-.043.028-.063l.015-.036a2 2 0 0 1 .051-.104c.01-.023.02-.045.031-.066l.031-.066.028-.056c.038-.081.079-.163.12-.244l.02-.04.161-.318.115-.223.026-.046.001-.007s0-.006.003-.006l.07-.13.025-.045.05-.094.049-.092.031-.053c.028-.055.059-.108.087-.162a28.625 28.625 0 0 1 3.192-4.62c.02-.025.043-.05.062-.076.395-.484.611-1.09.611-1.715 0-1.494-1.236-2.724-2.737-2.724-.824 0-1.606.371-2.126 1.009a34.24 34.24 0 0 0-2.803 3.812l-.02.03c-.074.117-.145.234-.219.348l-.112.185a34.329 34.329 0 0 0-3.805 8.885l-.016.056c-.026.091-.048.185-.074.28l-.02.078-.038.15-.039.15c-.025.099-.048.198-.071.3 0 .007-.005.018-.005.025-.002.016-.008.028-.011.043v.01l-.045.189c-.005.017-.008.035-.013.05a34.296 34.296 0 0 0-.378 13.325 34.304 34.304 0 0 0 4.795 12.585l.123.193.115.178c.038.061.076.119.114.177l.169.257c.033.052.066.099.099.147l.041.062c.069.102.139.204.21.304.005.01.012.018.018.028l.02.028c.127.186.257.37.39.551.072.099.146.201.22.299l.181.247c.028.039.056.076.087.114l.145.19c.031.039.059.08.092.117.046.062.094.12.14.181.026.033.051.066.077.096.051.066.105.13.155.196.034.041.064.081.097.12.047.055.093.114.141.169.033.041.067.079.1.118.045.058.097.114.145.172l.104.122.144.168c.076.091.155.18.234.266l.25.279c.084.092.174.193.264.287a34.267 34.267 0 0 0 6.818 5.689l.054.033.183.114a34.743 34.743 0 0 0 11.224 4.544l.184.037.168.033.358.071c.058.013.119.023.178.033l.092.016.092.015.189.033.046.007.066.013c.069.013.137.023.209.036l.253.04.255.038.255.039c.084.013.171.023.255.035l.255.033.161.02.166.02.149.019c.104.013.206.023.31.033l.225.023.136.012.188.018c.665.061 1.331.101 1.998.119h.084l.389.008h.995c.132 0 .263-.005.396-.008h.028c.135-.002.268-.007.403-.012l.207-.008.206-.01c.126-.005.253-.013.378-.021.186-.01.37-.023.556-.036.202-.014.401-.032.6-.05.211-.018.424-.041.633-.064.074-.007.148-.017.224-.024l.225-.029.087-.01c.071-.007.142-.018.212-.028.086-.01.175-.023.262-.036l.051-.007c.1-.016.2-.028.301-.046l.036-.005.194-.03.184-.03.11-.019h.017c.141-.024.278-.047.419-.073l.025-.005.246-.046a34.618 34.618 0 0 0 11.524-4.375l.189-.115c.199-.121.398-.246.592-.371.077-.048.151-.096.225-.144a35.25 35.25 0 0 0 3.386-2.507 2.712 2.712 0 0 0 .329-3.831h-.01Z"/><path d="M18.653 9.221c.481 0 .957-.127 1.373-.371a29.436 29.436 0 0 1 1.652-.887c.299-.147.6-.289.905-.427l.181-.081.183-.08.126-.054.242-.104.181-.076c.122-.051.248-.102.37-.15l.14-.056.232-.091c.321-.122.644-.238.97-.348l.158-.053c.314-.104.633-.206.952-.3l.158-.046a31.28 31.28 0 0 1 1.246-.331l.137-.032.161-.038.11-.025.118-.029c.076-.017.155-.035.232-.05.117-.026.235-.051.355-.074l.196-.039c.266-.05.531-.098.797-.144.127-.02.257-.043.385-.061l.395-.059.028-.004c.189-.026.378-.051.567-.074l.398-.046c.133-.014.265-.027.398-.037.132-.013.265-.023.4-.034l.251-.017.503-.031.249-.012c.051 0 .1-.006.151-.006l.138-.004.316-.011c.107-.002.214-.005.32-.005h.377c1.46-.001 2.918.108 4.362.327l.165.026.278.045.054.01.046.009c.069.013.141.023.209.035l.069.013.184.035.173.034c.061.01.123.023.182.034l.048.011c.138.028.278.058.416.089l.128.027c.096.021.191.044.288.067.112.025.224.053.337.081l.313.079.113.03.12.03h.005l.227.062c.011 0 .021.005.031.007l.104.031.146.04.12.033.168.048.133.042.12.035.056.018h.005l.069.02.146.045.091.029.12.038.212.069c.107.034.215.073.322.108.472.166.939.34 1.403.529l.158.065c.116.049.23.094.345.146.393.167.771.362 1.133.588 3.364 2.101 4.79 6.395 3.177 10.138-1.776 4.119-6.642 6.055-10.782 4.29a12.892 12.892 0 0 0-4.902-1.032h-.005c-.81-.008-1.618.061-2.415.206l-.086.015-.11.02c-.053.011-.11.021-.163.034h-.011l-.172.04-.139.033-.081.02-.133.033-.125.034-.087.023c-.176.047-.352.101-.525.157l-.21.068-.105.036c-.035.013-.068.023-.104.038l-.102.038a12.86 12.86 0 0 0-1.794.823l-.094.053-.192.109c-.064.038-.125.074-.189.115l-.176.112-.153.098-.105.069a.761.761 0 0 0-.058.041c-.02.015-.049.033-.074.05l-.087.061a5.482 5.482 0 0 0-.174.125l-.175.129c-.029.021-.057.043-.087.063a12.574 12.574 0 0 0-2.152 2.099c-.018.02-.033.04-.049.06-.042.053-.084.106-.124.16l-.09.115c-.081.105-.16.213-.237.322v.002a12.561 12.561 0 0 0-1.421 2.621c0 .006-.003.007-.006.013l-.045.114-.044.112c-.01.028-.023.058-.033.089-.01.028-.026.071-.038.109l-.046.133-.046.138a12.511 12.511 0 0 0-.386 6.51 12.49 12.49 0 0 0 1.82 4.415l.072.11a12.566 12.566 0 0 0 3.416 3.436l.131.085a12.676 12.676 0 0 0 5.634 2.05l.146.016.13.013.062.004c.809.071 1.622.066 2.431-.02a.966.966 0 0 0 .094-.013h.009a12.841 12.841 0 0 0 4.797-1.529 2.732 2.732 0 0 0 1.381-2.693 2.735 2.735 0 0 0-1.976-2.301 2.746 2.746 0 0 0-2.079.244 7.355 7.355 0 0 1-4.38.868l-.079-.01-.137-.018c-.047-.008-.097-.012-.148-.023a6.097 6.097 0 0 1-.462-.094c-.028-.005-.054-.013-.079-.018l-.093-.023-.091-.023-.092-.025-.076-.023-.1-.03c-.059-.018-.118-.039-.177-.056l-.086-.03-.173-.064a7.307 7.307 0 0 1-.258-.104l-.067-.028-.068-.031-.07-.033-.107-.05a7.348 7.348 0 0 1-2.761-2.332l-.061-.091-.059-.086c-.02-.03-.036-.053-.051-.079a7.299 7.299 0 0 1-1.173-3.824v-.24l.001-.116c.003-.038.003-.076.006-.117 0-.028 0-.055.005-.084l.005-.084c.006-.097.016-.194.028-.291.005-.054.013-.107.02-.163.006-.041.01-.081.019-.121l.014-.092c.011-.057.019-.112.031-.168l.031-.16.038-.175.028-.117.023-.092.054-.19c.081-.265.176-.525.285-.779.184-.427.408-.834.672-1.217.02-.032.046-.064.066-.094l.107-.147.057-.077c.02-.027.04-.053.061-.078.026-.033.051-.066.079-.099.025-.033.054-.066.079-.097l.082-.094c.045-.056.096-.109.148-.162l.01-.011c.099-.107.202-.21.309-.309l.035-.033c.278-.262.58-.5.896-.716l.181-.12.097-.061.107-.065.11-.064a7.621 7.621 0 0 1 1.199-.546l.179-.061.12-.038.12-.035.122-.033.118-.031c.123-.031.247-.058.372-.082l.085-.014.086-.016c.057-.01.11-.017.167-.025h.004a7.2 7.2 0 0 1 1.047-.076h.12a7.4 7.4 0 0 1 2.756.589c5.676 2.423 12.308.749 16.131-4.071a13.625 13.625 0 0 0 2.948-8.37v-.025c.021-5.558-3.38-10.595-8.56-12.675a12.821 12.821 0 0 1-.271-.111 18 18 0 0 0-.405-.163c-.136-.053-.271-.107-.405-.157l-.223-.084a4.19 4.19 0 0 0-.222-.081c-.067-.023-.131-.049-.196-.072l-.177-.063-.272-.094c-.19-.064-.38-.127-.57-.188l-.13-.043-.156-.051-.234-.073-.158-.049-.141-.04-.199-.059-.401-.114c-.091-.025-.183-.051-.275-.074l-.26-.068h-.01l-.057-.016c-.15-.037-.298-.076-.449-.111l-.153-.036-.179-.043-.268-.061-.02-.005-.268-.058a26.39 26.39 0 0 0-.559-.117l-.163-.031-.238-.046-.158-.03-.227-.04-.082-.016-.535-.088a21.934 21.934 0 0 0-.564-.085l-.225-.03-.127-.015c-.016 0-.032-.006-.046-.006l-.154-.02-.148-.017-.102-.013-.196-.023-.061-.007-.241-.026-.222-.02-.076-.008-.22-.02c-.086-.007-.173-.016-.259-.02-.394-.03-.788-.054-1.183-.072h-.088l-.051-.002-.192-.008-.27-.008-.6-.01h-.587c-.085 0-.166 0-.25.003-.084.003-.161.003-.24.005a19.17 19.17 0 0 0-.587.018l-.202.007-.092.006-.15.007-.197.01-.179.011h-.025a34.342 34.342 0 0 0-4.683.617l-.056.01c-.125.025-.25.053-.377.078l-.021.006c-.056.013-.112.023-.168.035A34.542 34.542 0 0 0 17.652 3.9l-.268.153-.107.06-.092.056a2.714 2.714 0 0 0-1.095 1.339 2.742 2.742 0 0 0-.069 1.724 2.757 2.757 0 0 0 2.632 1.963h.002l-.002.026Z"/><path d="m14.465 21.62-.023.039a23.427 23.427 0 0 0-2.782 6.592c-.003.013-.008.026-.01.038l-.039.16c-.004.026-.013.053-.017.079l-.036.153a23.424 23.424 0 0 0-.357 8.71l.03.198c.006.025.008.051.01.076l.016.086.022.14.006.025s0 .013.003.021a23.496 23.496 0 0 0 3.557 9.004l.046.072c.173.261.351.518.535.772.07.097.141.19.21.284a23.75 23.75 0 0 0 15.562 9.267l.033.005.155.022h.023l.128.02h.029l.137.022c1.87.235 3.764.245 5.639.035l.121-.015c.038-.006.076-.01.114-.013l.161-.02.031-.006h.02l.036-.007.151-.02.053-.008.266-.038h.002a23.745 23.745 0 0 0 10.81-4.599 2.748 2.748 0 0 0 .996-2.875 2.716 2.716 0 0 0-1.284-1.66 2.72 2.72 0 0 0-1.018-.341 2.764 2.764 0 0 0-2.031.556 18.295 18.295 0 0 1-6.513 3.167c-.031.008-.061.012-.092.02-.598.152-1.202.272-1.812.363h-.025c-.072.016-.144.023-.215.033l-.079.01c-.783.102-1.572.153-2.36.153h-.006c-1.684 0-3.36-.231-4.984-.688l-.015-.006c-.41-.116-.815-.246-1.215-.391l-.122-.045-.036-.013a5.542 5.542 0 0 1-.214-.082l-.062-.022-.107-.043-.028-.01h-.005c-.071-.028-.143-.056-.214-.086l-.113-.049-.319-.137-.086-.038a18.332 18.332 0 0 1-7.598-6.384l-.045-.066-.079-.12-.07-.107a18.2 18.2 0 0 1-2.934-9.725v-.234c0-.094 0-.188.003-.282v-.022a18.172 18.172 0 0 1 2.621-8.988l.03-.051.056-.093c.325-.522.677-1.027 1.054-1.514a18.207 18.207 0 0 1 5.548-4.784 18.467 18.467 0 0 1 6.326-2.141 18.62 18.62 0 0 1 2.606-.183h.005c.066 0 .133-.003.201-.007h.013c2.4.027 4.77.529 6.972 1.477h.005a2.73 2.73 0 0 0 1.084.224 2.748 2.748 0 0 0 2.734-2.722 2.748 2.748 0 0 0-1.658-2.507h-.006a23.684 23.684 0 0 0-12.775-1.668l-.094.015-.151.023-.028.005-.112.018a23.583 23.583 0 0 0-9.141 3.525l-.021.012c-.04.028-.084.053-.125.082l-.127.083c-.029.021-.057.038-.084.058a23.419 23.419 0 0 0-6.337 6.311c-.036.051-.069.102-.102.153l-.128.19-.11.17-.064.099c-.023.036-.046.071-.066.106l-.038.059-.046.071-.005.013.003-.006Z"/></svg>',
		web4: '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M23 11.622c-.02 6.055-4.941 10.964-11 10.964-6.071 0-11-4.929-11-11l9.588-9.588a1.998 1.998 0 0 1 1.411-.584c.53 0 1.037.211 1.41.586L23 11.622Zm-2.453.491c-.016 4.676-3.839 8.467-8.547 8.467-4.717 0-8.547-3.806-8.547-8.494l7.14-7.095a1.992 1.992 0 0 1 2.812.002l7.142 7.12Z"/></svg>',
		home: Home,
	};

	$: IconComponent = typeof icons[name] === 'string' ? null : icons[name];
	$: iconInsertion = typeof icons[name] === 'string' ? icons[name] : null;

	// Dynamic class based on status
	const statusClasses: Record<string, string> = {
		success: 'fill-green-500',
		expired: color || '',
		declined: 'fill-red-500',
		off: '',
	};

	$: dynamicClass = `${className} ${color || ''} ${statusClasses[status] || ''} ${animation}`;
</script>

<style>
	:root {
		--mota-animation-color-process: var(--tw-fill, #f97316);
	}

	/* Fill animation */
	.breathe.fill {
		animation: breathe-fill 1.5s infinite;
	}

	@keyframes breathe-fill {
		0%, 100% {
			fill: var(--tw-fill);
		}
		50% {
			fill: var(--mota-animation-color-process);
		}
	}

	/* Color animation */
	.breathe.color {
		animation: breathe-color 1.5s infinite;
	}

	@keyframes breathe-color {
		0%, 100% {
			color: currentColor;
		}
		50% {
			color: var(--mota-animation-color-process);
		}
	}

	/* Blink animation */
	.blink {
		animation: blink-animation 1s infinite;
	}

	@keyframes blink-animation {
		0%, 100% {
			opacity: 1;
		}
		50% {
			opacity: 0;
		}
	}
</style>

{#if IconComponent}
	<!-- Lucide component -->
	<IconComponent class={`${dynamicClass} ${animation === 'breathe' ? 'color' : ''}`} />
{:else if iconInsertion}
	<!-- Custom SVG -->
	<div class={`${dynamicClass} ${animation === 'breathe' ? 'fill' : ''}`}>
		{@html iconInsertion}
	</div>
{:else}
	<!-- Fallback -->
	<span class={className}>×</span>
{/if}
